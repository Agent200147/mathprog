(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))E(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&E(g)}).observe(document,{childList:!0,subtree:!0});function b(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function E(r){if(r.ep)return;r.ep=!0;const i=b(r);fetch(r.href,i)}})();const S=(v,s,b,E)=>`
        <div class="result result-${s} main-block"><h2>Результат ${b} ${v}</h2><div class="main-block main-block-white main-block-${s}-${b}">
        <div class="main-block-white-progress ${E||""}" id="progress-${s}-${b}"></div>
        <div class="loader" id="${s}-loader-${b}">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;"
                         width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                        <defs>
                            <path id="path" d="M50 15A15 35 0 0 1 50 85A15 35 0 0 1 50 15" fill="none"></path>
                            <path id="patha" d="M0 0A15 35 0 0 1 0 70A15 35 0 0 1 0 0" fill="none"></path>
                        </defs>
                        <g transform="rotate(0 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(60 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(120 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(0 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#e15b64">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="0s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                        <g transform="rotate(60 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#f8b26a">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="-0.08s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                        <g transform="rotate(120 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#abbd81">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="-0.1666s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                    </svg>
                </div>
        </div></div>
    `;window.addEventListener("load",()=>{Object.prototype.show=function(){this.style.display="flex"},Object.prototype.hide=function(){this.style.display="none"};const v=document.querySelector(".methods"),s=[],b=document.querySelectorAll(".methodFlag");b.forEach((t,o)=>{t.addEventListener("input",I=>{I.target.checked?v.classList.add(t.id):v.classList.remove(t.id),s[o]=I.target.checked,console.log(s)})}),b.forEach((t,o)=>{t.checked?v.classList.add(t.id):v.classList.remove(t.id),s[o]=t.checked}),console.log(s);const E=new Worker("assets/js/laba1/MK.js",{type:"module"}),r="monte",i=new Worker("assets/js/laba1/AN.js",{type:"module"}),g="annealing",O=new Worker("assets/js/laba2/GA.js",{type:"module"}),w="ga",z=new Worker("assets/js/laba3/INTERVAL.js",{type:"module"}),j="interval",n=document.getElementById("form1"),M=document.getElementById("resultMonte"),m=document.getElementById("btnSubmit1"),G=document.getElementById("btnReset1"),c=document.getElementById("btnClear1");let x=1,$=1,A=1,B=1;G.addEventListener("click",()=>{n.reset(),b.forEach(t=>{v.classList.remove(t.id)})}),c.addEventListener("click",()=>{x=1,$=1,A=1,B=1,M.innerHTML=""});const R=document.getElementById("flagEps"),Y=document.getElementById("eps");R.checked?Y.show():Y.hide(),R.addEventListener("input",t=>{t.target.checked?Y.show():Y.hide()}),document.querySelectorAll("input").forEach(t=>{t.addEventListener("dblclick",o=>{!o.target.value&&o.target.dataset.autocomplete&&(o.target.value=o.target.dataset.autocomplete)})}),n.addEventListener("submit",t=>{t.preventDefault();const o=document.querySelectorAll(".leftBorder"),I=document.querySelectorAll(".rightBorder");let k=[];for(let a=0;a<o.length;a++)k.push({left:Number(o[a].value),right:Number(I[a].value)});console.log(k);const l=n.fnInput.value;let L=l.match(/[a-z\s]+/ig).join("");C.forEach(a=>{L=L.replaceAll(a,""),L=L.replaceAll(" ","")});let e=L.split("").reduce((a,u)=>(a[u]=u,a),{});const d=Object.keys(e),q=new Date().getTime();if(s[0]){const a=n.monteIteration.value;M.innerHTML+=S("Монте-Карло",r,x),E.postMessage([k,d,l,a]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),console.log("Message posted to worker MK.js"),E.onmessage=function(u){const f=document.getElementById(`progress-${r}-${x}`);if(u.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),f.style.transform=u.data,!1;f.style.transform="translateY(226px)";const y=document.querySelector(`.main-block-${r}-${x}`),p=document.getElementById(`${r}-loader-${x}`);p.style.display="none",f.style.display="none",x++,p.style.display="none",u.data.forEach(h=>{y.innerHTML+=`<div>${h}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(s[1]){const a=n.annealingT.value,u=n.annealingR.value,f=n.annealingL.value;M.innerHTML+=S("Имитация отжига",g,$,`${g}-progress`),i.postMessage([k,d,l,f,a,u,q]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),console.log("Message posted to worker AN.js"),i.onmessage=function(y){const p=document.getElementById(`progress-${g}-${$}`);if(y.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),p.style.transform=y.data,!1;p.style.transform="translateY(226px)";const h=document.querySelector(`.main-block-${g}-${$}`),T=document.getElementById(`${g}-loader-${$}`);T.style.display="none",p.style.display="none",$++,y.data.forEach(X=>{h.innerHTML+=`<div>${X}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(s[2]){const a=n.k.value,u=n.k2.value,f=n.n.value,y=n.p.value,p=n.flagIter.checked,h=n.flagEps.checked,T=n.flagMachineEps.checked,X=n.eps.value;if(!p&&!h)return alert("Выберите какой-либо критерий останова!"),!1;if(!X&&!T&&h)return alert("Выберите точность!"),!1;M.innerHTML+=S("Генетический алг.",w,A),O.postMessage([k,d,l,a,u,f,y,p,h,T,X,q]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),O.onmessage=function(N){const W=document.getElementById(`progress-${w}-${A}`);if(N.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),W.style.transform=N.data,!1;W.style.transform="translateY(226px)";const D=document.querySelector(`.main-block-${w}-${A}`),F=document.getElementById(`${w}-loader-${A}`);F.style.display="none",W.style.display="none",A++,F.style.display="none",N.data.forEach(U=>{D.innerHTML+=`<div>${U}</div>`}),console.log(N.data),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(s[3]){const a=n.InEps.value;M.innerHTML+=S("Интервальный алг.",j,B),z.postMessage([k,d,l,a,q]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),z.onmessage=function(u){const f=document.getElementById(`progress-${j}-${B}`);f.style.transform="translateY(226px)";const y=document.querySelector(`.main-block-${j}-${B}`),p=document.getElementById(`${j}-loader-${B}`);p.style.display="none",f.style.display="none",B++,p.style.display="none",u.data.forEach(h=>{y.innerHTML+=`<div>${h}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}});const P=[{function:"(x + 2y - 7)^2 + (2x + y -5)^2",borderX:"-10",borderY:"10"},{function:"4x^2 - 2.1x^4 + x^6/3 + x*y - 4y^2 + 4y^4",borderX:"-5",borderY:"5"},{function:"2x^2 - 1.05x^4 + x^6/3 + x*y + y^2",borderX:"-5",borderY:"5"},{function:"0.26(x^2 + y^2) - 0.48x*y",borderX:"-10",borderY:"10"},{function:"x^2 + y^2 - cos(12x) - cos(18y)",borderX:"-1",borderY:"1"},{function:"(x^2 + y^2)/200 - cos(x)*cos(y/sqrt(2)) + 1",borderX:"-100",borderY:"100"},{function:"x^4 + 4x^3 + 4x^2 + y^2",borderX:"-5",borderY:"5"},{function:"sin(x+y) + (x+y)^2 - 1.5x + 2.5y + 1",borderX:"-1.5",borderY:"4",borderX2:"-3",borderY2:"3"},{function:"(2x^3 * y - y^3)^2 + (6x - y^2 + y)^2",borderX:"-10",borderY:"10"},{function:"100(y - y^2)^2 + (1 - x)^2 + 90(z - k^2)^2 + (1 - k)^2 + 10.1((y-1)^2 + (z - 1)^2 + 19.8(y - 1)(z - 1))",borderX:"-10",borderY:"10"}],H=document.getElementById("borders"),K=document.getElementById("function-input"),V=document.getElementById("flagMachineEps"),C=["cos","sin","tan","tg","ctg"];K.addEventListener("input",t=>{if(!t.target.value){H.innerHTML="";return}let o=t.target.value.match(/[a-z\s]+/ig).join("");C.forEach(e=>{o=o.replaceAll(e,""),o=o.replaceAll(" ","")});const I=o.split("").reduce((e,d,q)=>(e[d]=d,e),{}),l=Object.keys(I).join("");H.innerHTML="";for(let e=0;e<l.length;e++)H.innerHTML+=`<div class="border">
                            Границы<strong>&nbsp${l[e]}</strong>: <span class="scobka">(</span>
                            <input required type="text" data-autocomplete="-10" placeholder="-10" name="leftBorder${l[e]}" id="leftBorder${l[e]}" class="leftBorder"/>
                            <span class="tz">;</span>
                            <input required type="text" data-autocomplete="10" placeholder="10" name="rightBorder${l[e]}" id="rightBorder${l[e]}" class="rightBorder"/>
                            <span class="scobka">)</span>
                        </div>`;P.forEach(e=>{t.target.value===e.function&&(document.getElementById(`leftBorder${l[0]}`).value=e.borderX,document.getElementById(`rightBorder${l[0]}`).value=e.borderY,document.getElementById(`leftBorder${l[1]}`).value=e.borderX2||e.borderX,document.getElementById(`rightBorder${l[1]}`).value=e.borderY2||e.borderY)}),document.querySelectorAll("input").forEach(e=>{e.addEventListener("dblclick",d=>{!d.target.value&&d.target.dataset.autocomplete&&(d.target.value=d.target.dataset.autocomplete)})})}),V.addEventListener("input",t=>{t.target.checked?(n.eps.value="",n.eps.setAttribute("disabled","disabled")):n.eps.removeAttribute("disabled")})});
