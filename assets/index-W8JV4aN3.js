(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))k(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&k(f)}).observe(document,{childList:!0,subtree:!0});function g(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function k(r){if(r.ep)return;r.ep=!0;const i=g(r);fetch(r.href,i)}})();console.log("It's working!");const N=(v,o,g,k)=>`
        <div class="result result-${o} main-block"><h2>Результат ${g} ${v}</h2><div class="main-block main-block-white main-block-${o}-${g}">
        <div class="main-block-white-progress ${k||""}" id="progress-${o}-${g}"></div>
        <div class="loader" id="${o}-loader-${g}">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;"
                         width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                        <defs>
                            <path id="path" d="M50 15A15 35 0 0 1 50 85A15 35 0 0 1 50 15" fill="none"></path>
                            <path id="patha" d="M0 0A15 35 0 0 1 0 70A15 35 0 0 1 0 0" fill="none"></path>
                        </defs>
                        <g transform="rotate(0 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(60 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(120 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(0 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#e15b64">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="0s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                        <g transform="rotate(60 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#f8b26a">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="-0.08s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                        <g transform="rotate(120 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#abbd81">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="-0.1666s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                    </svg>
                </div>
        </div></div>
    `;window.addEventListener("load",()=>{Object.prototype.show=function(){this.style.display="flex"},Object.prototype.hide=function(){this.style.display="none"};const v=document.querySelector(".methods"),o=[],g=document.querySelectorAll(".methodFlag");g.forEach((t,s)=>{t.addEventListener("input",I=>{I.target.checked?v.classList.add(t.id):v.classList.remove(t.id),o[s]=I.target.checked,console.log(o)})}),g.forEach((t,s)=>{t.checked?v.classList.add(t.id):v.classList.remove(t.id),o[s]=t.checked}),console.log(o);const k=new Worker(new URL("https://agent200147.github.io/mathprog/assets/MK-Brynx6fg.js",import.meta.url),{type:"module"}),r="monte",i=new Worker(new URL("https://agent200147.github.io/mathprog/assets/AN-BgHkUI5u.js",import.meta.url),{type:"module"}),f="annealing",O=new Worker(new URL("https://agent200147.github.io/mathprog/assets/GA-C_7oGWCs.js",import.meta.url),{type:"module"}),w="ga",R=new Worker(new URL("https://agent200147.github.io/mathprog/assets/INTERVAL-BV2FD1uo.js",import.meta.url),{type:"module"}),Y="interval",n=document.getElementById("form1"),M=document.getElementById("resultMonte"),m=document.getElementById("btnSubmit1"),F=document.getElementById("btnReset1"),c=document.getElementById("btnClear1");let x=1,$=1,A=1,B=1;F.addEventListener("click",()=>{n.reset(),g.forEach(t=>{v.classList.remove(t.id)})}),c.addEventListener("click",()=>{x=1,$=1,A=1,B=1,M.innerHTML=""});const C=document.getElementById("flagEps"),q=document.getElementById("eps");C.checked?q.show():q.hide(),C.addEventListener("input",t=>{t.target.checked?q.show():q.hide()}),document.querySelectorAll("input").forEach(t=>{t.addEventListener("dblclick",s=>{!s.target.value&&s.target.dataset.autocomplete&&(s.target.value=s.target.dataset.autocomplete)})}),n.addEventListener("submit",t=>{t.preventDefault();const s=document.querySelectorAll(".leftBorder"),I=document.querySelectorAll(".rightBorder");let E=[];for(let a=0;a<s.length;a++)E.push({left:Number(s[a].value),right:Number(I[a].value)});console.log(E);const l=n.fnInput.value;let L=l.match(/[a-z\s]+/ig).join("");U.forEach(a=>{L=L.replaceAll(a,""),L=L.replaceAll(" ","")});let e=L.split("").reduce((a,u)=>(a[u]=u,a),{});const d=Object.keys(e),T=new Date().getTime();if(o[0]){const a=n.monteIteration.value;M.innerHTML+=N("Монте-Карло",r,x),k.postMessage([E,d,l,a]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),console.log("Message posted to worker MK.js"),k.onmessage=function(u){const b=document.getElementById(`progress-${r}-${x}`);if(u.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),b.style.transform=u.data,!1;b.style.transform="translateY(226px)";const y=document.querySelector(`.main-block-${r}-${x}`),p=document.getElementById(`${r}-loader-${x}`);p.style.display="none",b.style.display="none",x++,p.style.display="none",u.data.forEach(h=>{y.innerHTML+=`<div>${h}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(o[1]){const a=n.annealingT.value,u=n.annealingR.value,b=n.annealingL.value;M.innerHTML+=N("Имитация отжига",f,$,`${f}-progress`),i.postMessage([E,d,l,b,a,u,T]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),console.log("Message posted to worker AN.js"),i.onmessage=function(y){const p=document.getElementById(`progress-${f}-${$}`);if(y.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),p.style.transform=y.data,!1;p.style.transform="translateY(226px)";const h=document.querySelector(`.main-block-${f}-${$}`),j=document.getElementById(`${f}-loader-${$}`);j.style.display="none",p.style.display="none",$++,y.data.forEach(X=>{h.innerHTML+=`<div>${X}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(o[2]){const a=n.k.value,u=n.k2.value,b=n.n.value,y=n.p.value,p=n.flagIter.checked,h=n.flagEps.checked,j=n.flagMachineEps.checked,X=n.eps.value;if(!p&&!h)return alert("Выберите какой-либо критерий останова!"),!1;if(!X&&!j&&h)return alert("Выберите точность!"),!1;M.innerHTML+=N("Генетический алг.",w,A),O.postMessage([E,d,l,a,u,b,y,p,h,j,X,T]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),O.onmessage=function(H){const W=document.getElementById(`progress-${w}-${A}`);if(H.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),W.style.transform=H.data,!1;W.style.transform="translateY(226px)";const D=document.querySelector(`.main-block-${w}-${A}`),z=document.getElementById(`${w}-loader-${A}`);z.style.display="none",W.style.display="none",A++,z.style.display="none",H.data.forEach(K=>{D.innerHTML+=`<div>${K}</div>`}),console.log(H.data),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(o[3]){const a=n.InEps.value;M.innerHTML+=N("Интервальный алг.",Y,B),R.postMessage([E,d,l,a,T]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),R.onmessage=function(u){const b=document.getElementById(`progress-${Y}-${B}`);b.style.transform="translateY(226px)";const y=document.querySelector(`.main-block-${Y}-${B}`),p=document.getElementById(`${Y}-loader-${B}`);p.style.display="none",b.style.display="none",B++,p.style.display="none",u.data.forEach(h=>{y.innerHTML+=`<div>${h}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}});const G=[{function:"(x + 2y - 7)^2 + (2x + y -5)^2",borderX:"-10",borderY:"10"},{function:"4x^2 - 2.1x^4 + x^6/3 + x*y - 4y^2 + 4y^4",borderX:"-5",borderY:"5"},{function:"2x^2 - 1.05x^4 + x^6/3 + x*y + y^2",borderX:"-5",borderY:"5"},{function:"0.26(x^2 + y^2) - 0.48x*y",borderX:"-10",borderY:"10"},{function:"x^2 + y^2 - cos(12x) - cos(18y)",borderX:"-1",borderY:"1"},{function:"(x^2 + y^2)/200 - cos(x)*cos(y/sqrt(2)) + 1",borderX:"-100",borderY:"100"},{function:"x^4 + 4x^3 + 4x^2 + y^2",borderX:"-5",borderY:"5"},{function:"sin(x+y) + (x+y)^2 - 1.5x + 2.5y + 1",borderX:"-1.5",borderY:"4",borderX2:"-3",borderY2:"3"},{function:"(2x^3 * y - y^3)^2 + (6x - y^2 + y)^2",borderX:"-10",borderY:"10"},{function:"100(y - y^2)^2 + (1 - x)^2 + 90(z - k^2)^2 + (1 - k)^2 + 10.1((y-1)^2 + (z - 1)^2 + 19.8(y - 1)(z - 1))",borderX:"-10",borderY:"10"}],S=document.getElementById("borders"),P=document.getElementById("function-input"),V=document.getElementById("flagMachineEps"),U=["cos","sin","tan","tg","ctg"];P.addEventListener("input",t=>{if(!t.target.value){S.innerHTML="";return}let s=t.target.value.match(/[a-z\s]+/ig).join("");U.forEach(e=>{s=s.replaceAll(e,""),s=s.replaceAll(" ","")});const I=s.split("").reduce((e,d,T)=>(e[d]=d,e),{}),l=Object.keys(I).join("");S.innerHTML="";for(let e=0;e<l.length;e++)S.innerHTML+=`<div class="border">
                            Границы<strong>&nbsp${l[e]}</strong>: <span class="scobka">(</span>
                            <input required type="text" data-autocomplete="-10" placeholder="-10" name="leftBorder${l[e]}" id="leftBorder${l[e]}" class="leftBorder"/>
                            <span class="tz">;</span>
                            <input required type="text" data-autocomplete="10" placeholder="10" name="rightBorder${l[e]}" id="rightBorder${l[e]}" class="rightBorder"/>
                            <span class="scobka">)</span>
                        </div>`;G.forEach(e=>{t.target.value===e.function&&(document.getElementById(`leftBorder${l[0]}`).value=e.borderX,document.getElementById(`rightBorder${l[0]}`).value=e.borderY,document.getElementById(`leftBorder${l[1]}`).value=e.borderX2||e.borderX,document.getElementById(`rightBorder${l[1]}`).value=e.borderY2||e.borderY)}),document.querySelectorAll("input").forEach(e=>{e.addEventListener("dblclick",d=>{!d.target.value&&d.target.dataset.autocomplete&&(d.target.value=d.target.dataset.autocomplete)})})}),V.addEventListener("input",t=>{t.target.checked?(n.eps.value="",n.eps.setAttribute("disabled","disabled")):n.eps.removeAttribute("disabled")})});
