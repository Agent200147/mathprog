(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))f(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const y of i.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function g(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function f(n){if(n.ep)return;n.ep=!0;const i=g(n);fetch(n.href,i)}})();console.log("It's working!");const S=(k,o,g,f)=>`
        <div class="result result-${o} main-block"><h2>Результат ${g} ${k}</h2><div class="main-block main-block-white main-block-${o}-${g}">
        <div class="main-block-white-progress ${f||""}" id="progress-${o}-${g}"></div>
        <div class="loader" id="${o}-loader-${g}">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;"
                         width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                        <defs>
                            <path id="path" d="M50 15A15 35 0 0 1 50 85A15 35 0 0 1 50 15" fill="none"></path>
                            <path id="patha" d="M0 0A15 35 0 0 1 0 70A15 35 0 0 1 0 0" fill="none"></path>
                        </defs>
                        <g transform="rotate(0 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(60 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(120 50 50)">
                            <use xlink:href="#path" stroke="#000000" stroke-width="3"></use>
                        </g>
                        <g transform="rotate(0 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#e15b64">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="0s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                        <g transform="rotate(60 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#f8b26a">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="-0.08s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                        <g transform="rotate(120 50 50)">
                            <circle cx="50" cy="15" r="9" fill="#abbd81">
                                <animateMotion dur="0.5s" repeatCount="indefinite" begin="-0.1666s">
                                    <mpath xlink:href="#patha"></mpath>
                                </animateMotion>
                            </circle>
                        </g>
                    </svg>
                </div>
        </div></div>
    `;window.addEventListener("load",()=>{Object.prototype.show=function(){this.style.display="flex"},Object.prototype.hide=function(){this.style.display="none"};const k=document.querySelector(".methods"),o=[],g=document.querySelectorAll(".methodFlag");g.forEach((t,s)=>{t.addEventListener("input",I=>{I.target.checked?k.classList.add(t.id):k.classList.remove(t.id),o[s]=I.target.checked,console.log(o)})}),g.forEach((t,s)=>{t.checked?k.classList.add(t.id):k.classList.remove(t.id),o[s]=t.checked}),console.log(o);const f="monte",n=new Worker(new URL("https://agent200147.github.io/mathprog/assets/MK-Brynx6fg.js",import.meta.url),{type:"module"}),i=new Worker("assets/js/laba1/AN.js",{type:"module"}),y="annealing",O=new Worker("assets/js/laba2/GA.js",{type:"module"}),w="ga",R=new Worker("assets/js/laba3/INTERVAL.js",{type:"module"}),Y="interval",r=document.getElementById("form1"),M=document.getElementById("resultMonte"),m=document.getElementById("btnSubmit1"),G=document.getElementById("btnReset1"),c=document.getElementById("btnClear1");let x=1,$=1,A=1,B=1;G.addEventListener("click",()=>{r.reset(),g.forEach(t=>{k.classList.remove(t.id)})}),c.addEventListener("click",()=>{x=1,$=1,A=1,B=1,M.innerHTML=""});const z=document.getElementById("flagEps"),j=document.getElementById("eps");z.checked?j.show():j.hide(),z.addEventListener("input",t=>{t.target.checked?j.show():j.hide()}),document.querySelectorAll("input").forEach(t=>{t.addEventListener("dblclick",s=>{!s.target.value&&s.target.dataset.autocomplete&&(s.target.value=s.target.dataset.autocomplete)})}),r.addEventListener("submit",t=>{t.preventDefault();const s=document.querySelectorAll(".leftBorder"),I=document.querySelectorAll(".rightBorder");let E=[];for(let a=0;a<s.length;a++)E.push({left:Number(s[a].value),right:Number(I[a].value)});console.log(E);const l=r.fnInput.value;let L=l.match(/[a-z\s]+/ig).join("");C.forEach(a=>{L=L.replaceAll(a,""),L=L.replaceAll(" ","")});let e=L.split("").reduce((a,u)=>(a[u]=u,a),{});const d=Object.keys(e),q=new Date().getTime();if(o[0]){const a=r.monteIteration.value;M.innerHTML+=S("Монте-Карло",f,x),n.postMessage([E,d,l,a]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),console.log("Message posted to worker MK.js"),n.onmessage=function(u){const b=document.getElementById(`progress-${f}-${x}`);if(u.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),b.style.transform=u.data,!1;b.style.transform="translateY(226px)";const h=document.querySelector(`.main-block-${f}-${x}`),p=document.getElementById(`${f}-loader-${x}`);p.style.display="none",b.style.display="none",x++,p.style.display="none",u.data.forEach(v=>{h.innerHTML+=`<div>${v}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(o[1]){const a=r.annealingT.value,u=r.annealingR.value,b=r.annealingL.value;M.innerHTML+=S("Имитация отжига",y,$,`${y}-progress`),i.postMessage([E,d,l,b,a,u,q]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),console.log("Message posted to worker AN.js"),i.onmessage=function(h){const p=document.getElementById(`progress-${y}-${$}`);if(h.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),p.style.transform=h.data,!1;p.style.transform="translateY(226px)";const v=document.querySelector(`.main-block-${y}-${$}`),T=document.getElementById(`${y}-loader-${$}`);T.style.display="none",p.style.display="none",$++,h.data.forEach(X=>{v.innerHTML+=`<div>${X}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(o[2]){const a=r.k.value,u=r.k2.value,b=r.n.value,h=r.p.value,p=r.flagIter.checked,v=r.flagEps.checked,T=r.flagMachineEps.checked,X=r.eps.value;if(!p&&!v)return alert("Выберите какой-либо критерий останова!"),!1;if(!X&&!T&&v)return alert("Выберите точность!"),!1;M.innerHTML+=S("Генетический алг.",w,A),O.postMessage([E,d,l,a,u,b,h,p,v,T,X,q]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),O.onmessage=function(N){const W=document.getElementById(`progress-${w}-${A}`);if(N.data.length!==d.length+2)return m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),W.style.transform=N.data,!1;W.style.transform="translateY(226px)";const V=document.querySelector(`.main-block-${w}-${A}`),F=document.getElementById(`${w}-loader-${A}`);F.style.display="none",W.style.display="none",A++,F.style.display="none",N.data.forEach(D=>{V.innerHTML+=`<div>${D}</div>`}),console.log(N.data),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}if(o[3]){const a=r.InEps.value;M.innerHTML+=S("Интервальный алг.",Y,B),R.postMessage([E,d,l,a,q]),m.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),R.onmessage=function(u){const b=document.getElementById(`progress-${Y}-${B}`);b.style.transform="translateY(226px)";const h=document.querySelector(`.main-block-${Y}-${B}`),p=document.getElementById(`${Y}-loader-${B}`);p.style.display="none",b.style.display="none",B++,p.style.display="none",u.data.forEach(v=>{h.innerHTML+=`<div>${v}</div>`}),m.removeAttribute("disabled"),c.removeAttribute("disabled")}}});const P=[{function:"(x + 2y - 7)^2 + (2x + y -5)^2",borderX:"-10",borderY:"10"},{function:"4x^2 - 2.1x^4 + x^6/3 + x*y - 4y^2 + 4y^4",borderX:"-5",borderY:"5"},{function:"2x^2 - 1.05x^4 + x^6/3 + x*y + y^2",borderX:"-5",borderY:"5"},{function:"0.26(x^2 + y^2) - 0.48x*y",borderX:"-10",borderY:"10"},{function:"x^2 + y^2 - cos(12x) - cos(18y)",borderX:"-1",borderY:"1"},{function:"(x^2 + y^2)/200 - cos(x)*cos(y/sqrt(2)) + 1",borderX:"-100",borderY:"100"},{function:"x^4 + 4x^3 + 4x^2 + y^2",borderX:"-5",borderY:"5"},{function:"sin(x+y) + (x+y)^2 - 1.5x + 2.5y + 1",borderX:"-1.5",borderY:"4",borderX2:"-3",borderY2:"3"},{function:"(2x^3 * y - y^3)^2 + (6x - y^2 + y)^2",borderX:"-10",borderY:"10"},{function:"100(y - y^2)^2 + (1 - x)^2 + 90(z - k^2)^2 + (1 - k)^2 + 10.1((y-1)^2 + (z - 1)^2 + 19.8(y - 1)(z - 1))",borderX:"-10",borderY:"10"}],H=document.getElementById("borders"),K=document.getElementById("function-input"),U=document.getElementById("flagMachineEps"),C=["cos","sin","tan","tg","ctg"];K.addEventListener("input",t=>{if(!t.target.value){H.innerHTML="";return}let s=t.target.value.match(/[a-z\s]+/ig).join("");C.forEach(e=>{s=s.replaceAll(e,""),s=s.replaceAll(" ","")});const I=s.split("").reduce((e,d,q)=>(e[d]=d,e),{}),l=Object.keys(I).join("");H.innerHTML="";for(let e=0;e<l.length;e++)H.innerHTML+=`<div class="border">
                            Границы<strong>&nbsp${l[e]}</strong>: <span class="scobka">(</span>
                            <input required type="text" data-autocomplete="-10" placeholder="-10" name="leftBorder${l[e]}" id="leftBorder${l[e]}" class="leftBorder"/>
                            <span class="tz">;</span>
                            <input required type="text" data-autocomplete="10" placeholder="10" name="rightBorder${l[e]}" id="rightBorder${l[e]}" class="rightBorder"/>
                            <span class="scobka">)</span>
                        </div>`;P.forEach(e=>{t.target.value===e.function&&(document.getElementById(`leftBorder${l[0]}`).value=e.borderX,document.getElementById(`rightBorder${l[0]}`).value=e.borderY,document.getElementById(`leftBorder${l[1]}`).value=e.borderX2||e.borderX,document.getElementById(`rightBorder${l[1]}`).value=e.borderY2||e.borderY)}),document.querySelectorAll("input").forEach(e=>{e.addEventListener("dblclick",d=>{!d.target.value&&d.target.dataset.autocomplete&&(d.target.value=d.target.dataset.autocomplete)})})}),U.addEventListener("input",t=>{t.target.checked?(r.eps.value="",r.eps.setAttribute("disabled","disabled")):r.eps.removeAttribute("disabled")})});
